# UDP 체크섬
UDP 체크섬 계산 과정에서 말하는 윤회식 자리올림(cyclic carry, end-around carry)은     
수학적인 반올림이 아니라, 16비트 덧셈에서 발생한 carry(자리올림)를 다시 더하는 규칙이다.     
네트워크에서 사용하는 1의 보수 덧셈 방식 때문에 필요한 절차이다.

아래에서 정확하게 설명한다.

---

# 1. UDP 체크섬은 1의 보수(ones’ complement) 덧셈을 사용한다

UDP 체크섬은 다음 데이터를 16비트 단위로 끊어서 모두 더한 뒤, 그 합의 1의 보수를 취한 값이다.

이때 덧셈 방식은 컴퓨터 일반 덧셈이 아니라
1의 보수 덧셈(ones’ complement addition)을 사용한다.

---

# 2. 1의 보수 덧셈에서는 carry가 발생하면 “윤회식 자리올림”을 한다

16비트 덧셈 중 합이 16비트를 넘어서 17번째 비트(carry)가 생기면
그 carry를 다시 16비트 결과에 더해준다.

이걸 윤회식 자리올림(end-around carry)이라고 한다.

즉:

```
(16비트를 넘어가는 carry) → 다시 결과의 맨 아래 비트로 더한다
```

덧셈이 윤회하듯 한 바퀴 돌아 다시 들어온다 해서 이렇게 부른다.

---

# 3. 예시로 이해하기

두 16비트 단위를 더하는 상황:

```
0xFFFF + 0x0001
```

보통 덧셈이라면:

```
0xFFFF + 0x0001 = 0x1_0000 → 17비트
```

UDP 체크섬에서는 16비트만 남기고 carry를 다시 더한다.

1. 16비트 유지

```
0x0000   (상위 carry는 버림)
```

2. carry 1을 다시 더함 → 윤회식 자리올림

```
0x0000 + 0x0001 = 0x0001
```

결과:

```
0x0001
```

---

# 4. 왜 이렇게 하느냐

1의 보수 방식에서는 다음 조건을 만족해야 한다.

 데이터의 순서가 바뀌어도 체크섬 검증이 동일하게 동작해야 한다.
 16비트씩 덧셈할 때 carry가 발생해도 정보가 손실되면 안 된다.

따라서 carry를 다시 더하는 구조가 필요하고,
이 구조가 “윤회식 자리올림(end-around carry)”이다.

---

# 5. 한 줄 정리

UDP 체크섬에서 말하는 윤회식 자리올림은 16비트 덧셈에서 넘친 carry를 다시 하위 비트에 더해주는 것이며,          
이는 1의 보수 덧셈을 구현하기 위한 필수 절차이다.
