# DNS
## DNS 계층 구조

```
1. 루트 네임서버 (Root Name Server)
   - 최상위 계층
   - 전 세계에 13개 (논리적)
   
2. TLD 네임서버 (Top-Level Domain Name Server)
   - .com, .net, .org, .kr 등을 관리
   - 예: .com 네임서버, .kr 네임서버
   
3. 권한 있는 네임서버 (Authoritative Name Server)
   - 특정 도메인(example.com)의 실제 DNS 레코드를 가지고 있는 서버
   - 도메인 소유자가 선택/설정하는 네임서버
```

## 구체적인 예시

**example.com을 조회할 때:**

```
사용자: "example.com의 IP 주소는?"
    ↓
1. 루트 네임서버에 질의
   → ".com은 TLD 네임서버에 물어보세요"
    ↓
2. TLD 네임서버 (.com)에 질의
   → "example.com은 ns1.cloudflare.com에 물어보세요"
    ↓
3. 권한 있는 네임서버 (ns1.cloudflare.com)에 질의
   → "example.com = 93.184.216.34입니다" ✓ (최종 답변)
```

## 핵심 차이점

| 구분 | TLD 네임서버 | 권한 있는 네임서버 |
|------|-------------|------------------|
| 역할 | 도메인의 네임서버가 누구인지 알려줌 | 실제 DNS 레코드(A, MX 등)를 제공 |
| 관리 주체 | TLD 레지스트리 (.com은 Verisign) | 도메인 소유자가 선택한 DNS 서비스 |
| 예시 | .com 네임서버, .kr 네임서버 | Cloudflare, AWS Route 53, 가비아 DNS 등 |
| 저장 정보 | NS 레코드만 | A, CNAME, MX, TXT 등 모든 레코드 |

## 실제 예시

**naver.com의 경우:**

```
# TLD 네임서버 (.com)가 알려주는 정보:
naver.com의 네임서버는 ns1.naver.com, ns2.naver.com입니다

# 권한 있는 네임서버 (ns1.naver.com)가 가진 정보:
naver.com         A      223.130.195.95
www.naver.com     A      223.130.195.95
mail.naver.com    CNAME  ...
naver.com         MX     ...
```

따라서 **권한 있는 네임서버**는 **도메인을 구매한 후 선택하는 DNS 서비스**(예: Cloudflare, AWS Route 53, Cafe24 DNS 등)이고,         
**TLD 네임서버**는 그보다 한 단계 위에서 "이 도메인의 DNS는 어디서 관리하는지"만 알려주는 역할


## 서브도메인(Subdomain)이란?

메인 도메인 앞에 추가되는 하위 도메인.

## 구조

```
서브도메인.메인도메인.최상위도메인
   ↓         ↓         ↓
  www  . example . com
  blog . example . com
  mail . example . com
```

## 실제 예시

| 전체 도메인 | 서브도메인 | 메인 도메인 | 용도 |
|------------|-----------|------------|------|
| www.naver.com | www | naver.com | 메인 웹사이트 |
| mail.naver.com | mail | naver.com | 메일 서비스 |
| blog.naver.com | blog | naver.com | 블로그 서비스 |
| cafe.naver.com | cafe | naver.com | 카페 서비스 |
| map.naver.com | map | naver.com | 지도 서비스 |
| shop.example.com | shop | example.com | 쇼핑몰 |
| api.example.com | api | example.com | API 서버 |
| dev.example.com | dev | example.com | 개발 환경 |

## 다단계 서브도메인

서브도메인 아래에 또 서브도메인을 만들 수 있다:

```
admin.blog.example.com
  ↓    ↓      ↓
3단계 2단계  1단계(메인)

api.dev.example.com (개발용 API)
www.store.example.com (스토어의 웹 페이지)
```

## 서브도메인의 장점

1. **서비스 분리**: 각 서비스를 독립적으로 관리
   - blog.example.com → 블로그 서버
   - shop.example.com → 쇼핑몰 서버

2. **서버 분산**: 다른 서버/IP로 연결 가능
   ```
   example.com      → 93.184.216.34 (메인 서버)
   api.example.com  → 203.0.113.50 (API 서버)
   cdn.example.com  → CDN 서비스
   ```

3. **관리 편의성**: 각 서브도메인마다 다른 DNS 설정 가능

4. **비용**: 추가 비용 없이 무제한 생성 가능

## DNS 설정 예시

```
# 메인 도메인
example.com           A      93.184.216.34

# 서브도메인들
www.example.com       A      93.184.216.34
blog.example.com      A      198.51.100.10
shop.example.com      CNAME  shops.shopify.com
api.example.com       A      203.0.113.50
mail.example.com      A      203.0.113.60

# 와일드카드 서브도메인 (모든 서브도메인을 같은 곳으로)
*.example.com         A      93.184.216.34
```

## 흔히 사용되는 서브도메인

- **www**: 월드와이드웹, 전통적인 웹사이트
- **mail**: 웹메일 서비스
- **blog**: 블로그
- **shop/store**: 쇼핑몰
- **api**: API 엔드포인트
- **dev/test**: 개발/테스트 환경
- **admin**: 관리자 페이지
- **m/mobile**: 모바일 사이트
- **cdn**: CDN 리소스
- **docs**: 문서/도움말

요약하면, **서브도메인은 메인 도메인 앞에 붙여서 서비스를 구분하는 이름**!
