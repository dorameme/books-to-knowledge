웹서버는 대표적인 종단시스템(End System)이다.

## 종단시스템(End System)의 정의
종단시스템은 네트워크의 가장 끝에 위치하여 데이터 통신을 시작하거나 최종적으로 수신하는 장치를 의미합니다. 호스트(Host)라고도 부른다.

## 웹서버가 종단시스템인 이유

### 1. 네트워크 경계에 위치
- 인터넷의 관점에서 웹서버는 서비스 제공의 종착지(목적지)이다.
- 클라이언트(웹 브라우저)가 보낸 HTTP 요청의 최종 수신자이다.
- 응답 데이터의 출발점이다.

### 2. TCP/IP 통신의 종단점
```plaintext
클라이언트(PC/모바일) ↔ [라우터, 스위치 등 중간 장치] ↔ 웹서버(종단시스템)
```
- 웹서버는 TCP 연결을 직접 수립/종료.
- 포트 80(HTTP) 또는 443(HTTPS)에서 직접 서비스를 수신.
- 애플리케이션 계층(HTTP)부터 물리 계층까지 전체 프로토콜 스택을 구현.

### 3. 종단시스템의 주요 특성 모두 충족
| 특성 | 웹서버의 경우 |
|------|--------------|
| IP 주소 보유 | 공인/사설 IP 주소를 할당받음 |
| 응용 프로그램 실행 | Apache, Nginx, IIS 등의 웹 서버 소프트웨어 실행 |
| 직접 통신 가능 | 클라이언트와 직접 데이터 교환 |
| 네트워크 경계 | 데이터센터, IDC, 클라우드 등 네트워크의 끝단에 위치 |

## 중간 시스템(Intermediate System)과의 비교

### 중간 시스템 (라우터, 스위치, L4 스위치 등)
- 목적: 데이터를 중계(Forwarding)만 함
- 동작 계층: 주로 네트워크 계층(L3) 이하에서 작동
- 예시: 라우터는 IP 패킷의 목적지 주소를 보고 다음 홉으로 전달만 함
- 데이터 변환: 일반적으로 페이로드 내용을 변경하지 않음 (NAT 제외)

### 종단 시스템 (웹서버, 클라이언트 PC, 이메일 서버 등)
- 목적: 데이터를 생성/소비(생성/처리)함
- 동작 계층: 응용 계층(L7)까지 전체 스택 사용
- 예시: 웹서버는 HTTP 요청을 해석하고, HTML 파일을 읽어 응답을 생성함
- 데이터 변환: 응용 데이터를 생성, 처리, 변환함

## 실무적 관점에서의 웹서버

### 클라우드 환경에서
```plaintext
사용자 → CDN(중간) → 로드밸런서(중간) → 웹서버(종단)
```
- 웹서버는 로드밸런서 뒤에 위치하더라도 여전히 종단시스템.
- 로드밸런서는 연결을 중계만 할 뿐, 최종 HTTP 요청 처리자는 웹서버.

### 마이크로서비스 아키텍처에서
```
API Gateway(중간) → [서비스 A(종단), 서비스 B(종단), 웹서버(종단)]
```
- 웹서버도 하나의 서비스로서 종단시스템 역할을 함.
- API Gateway는 라우팅만 담당하고, 실제 비즈니스 로직은 각 서비스(종단)에서 처리.

### 리버스 프록시 구성 시
```
클라이언트 → Nginx(리버스 프록시) → Apache 웹서버(종단)
```
- Nginx는 중간 시스템(프록시)으로 작동함.
- Apache 웹서버는 여전히 종단시스템으로 정적/동적 컨텐츠를 제공함.

## 주의할 점: 상황에 따른 이중적 역할

### 웹서버가 중간 시스템처럼 동작하는 경우
1. 리버스 프록시 역할: Nginx가 백엔드 애플리케이션 서버로 요청을 전달할 때
2. 로드밸런서 기능: 웹서버가 여러 백엔드로 요청을 분산할 때
3. API Gateway: 웹서버가 여러 마이크로서비스로 라우팅할 때

하지만 이 경우에도:
- 최종 사용자(인간)에게 서비스를 제공한다는 점에서 근본적으로 종단시스템.
- 다른 서비스에 대한 프록시 역할은 추가 기능에 불과.

## 네트워크 계층별 웹서버의 동작

| 계층 | 웹서버의 역할 | 종단시스템으로서의 증거 |
|------|---------------|------------------------|
| 응용(L7) | HTTP/HTTPS 요청 처리, HTML 생성 | 애플리케이션 로직 실행 |
| 전송(L4) | TCP 연결 관리, 포트 80/443 수신 | 직접 소켓 생성/관리 |
| 네트워크(L3) | IP 패킷 송수신, 라우팅 테이블 유지 | 자신의 IP 주소로 통신 |
| 링크(L2) | 프레임 처리, MAC 주소 사용 | 네트워크 인터페이스 직접 제어 |
| 물리(L1) | 전기/광 신호 변환 | 실제 케이블에 연결 |

## 결론

웹서버는 명확한 종단시스템입니다.

1. 정의적 측면: 네트워크의 끝에서 서비스를 제공하는 호스트
2. 기술적 측면: 전체 프로토콜 스택을 구현하고 최종 데이터 처리를 수행
3. 실무적 측면: 사용자의 요청에 대한 최종 응답을 생성하는 서버

웹서버가 리버스 프록시나 로드밸런서 기능을 추가로 수행하더라도,     
이것은 부가적인 역할일 뿐, 사용자에게 콘텐츠와 서비스를 제공하는 최종 종단점이라는 본질은 변하지 않음.      
따라서 네트워크 설계나 문제 해결 시 웹서버를 종단시스템으로 간주하고, 여기서부터 역추적하거나 여기를 대상으로 모니터링하는 것이 올바른 접근법.
