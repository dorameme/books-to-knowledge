# 라우팅 프로토콜 상세 설명

## 1. 라우팅 프로토콜 기본 분류

### Link-State (링크 상태) 프로토콜
- **기본 개념**: 각 라우터가 네트워크 전체 토폴로지 맵을 구성하여 최단 경로 계산
- **작동 방식**: 
  1. 인접 라우터 탐색(Hello 패킷)
  2. 링크 상태 정보 수집
  3. 링크 상태 광고(LSA) 플러딩
  4. 전체 토폴로지 맵 구축(링크 상태 데이터베이스)
  5. 다익스트라 알고리즘으로 최단 경로 트리 계산
- **특징**: 빠른 수렴, 네트워크 토폴로지 전체 인지, 높은 CPU/메모리 사용

### Distance Vector (거리 벡터) 프로토콜
- **기본 개념**: 각 라우터가 목적지까지의 거리와 방향(벡터) 정보를 이웃과 교환
- **작동 방식**:
  1. 주기적으로 전체 라우팅 테이블을 이웃에게 광고
  2. 이웃으로부터 받은 정보에 자신까지의 거리 추가
  3. 최적 경로 선택(거리 비교)
  4. 수렴 속도 느림(카운트-투-인피니티 문제)
- **특징**: 구현 간단, 낮은 오버헤드, 느린 수렴, 루프 발생 가능성

## 2. 개별 프로토콜 상세 설명

### OSPF (Open Shortest Path First)
- **유형**: Link-State IGP(내부 게이트웨이 프로토콜)
- **표준**: RFC 2328 (OSPFv2), IETF 표준
- **메트릭**: Cost (대역폭 기반), 10^8/대역폭(bps)
- **주요 특징**:
  - 계층적 구조(Area 구성)
  - 빠른 수렴(몇 초 내)
  - VLSM(Variable Length Subnet Mask) 지원
  - 인증 기능
  - 멀티캐스트 주소 사용(224.0.0.5, 224.0.0.6)
- **동작 과정**:
  1. 이웃 발견 및 관계 수립
  2. 링크 상태 데이터베이스 동기화
  3. LSA 플러딩을 통한 토폴로지 유지
  4. SPF 알고리즘 실행 및 라우팅 테이블 생성

### RIP (Routing Information Protocol)
- **유형**: Distance Vector IGP
- **버전**: RIPv1, RIPv2, RIPng(IPv6)
- **메트릭**: Hop Count (최대 15 hop)
- **주요 특징**:
  - 구현 간단
  - 30초마다 전체 라우팅 테이블 브로드캐스트
  - RIPv2: VLSM 지원, 인증 기능
  - 무한대 거리: 16 hop
- **단점**:
  - 느린 수렴
  - 카운트-투-인피니티 문제
  - 작은 네트워크에 적합

### BGP (Border Gateway Protocol)
- **유형**: Path Vector EGP(외부 게이트웨이 프로토콜)
- **버전**: BGP-4 (현재 표준)
- **메트릭**: 경로 속성 기반 결정
- **주요 특징**:
  - 인터넷 백본 라우팅 프로토콜
  - TCP 179 포트 사용(신뢰성 있는 전송)
  - 경로 벡터 방식(루프 방지)
  - 정책 기반 라우팅 지원
  - 30초 Keepalive, 90초 Hold Time
- **경로 속성**:
  - AS_Path: 경로상의 AS 목록
  - Next_Hop: 다음 홉 IP
  - Local_Pref: 로컬 선호도
  - MED: 다중 출구 구별자
  - Origin: 경로 출처

## 3. 표 비교

| 구분 | OSPF | RIP | BGP |
|------|------|-----|-----|
| **프로토콜 유형** | Link-State IGP | Distance Vector IGP | Path Vector EGP |
| **적용 범위** | 자율 시스템 내부 | 자율 시스템 내부 | 자율 시스템 간 |
| **메트릭 기준** | Cost (대역폭 기반) | Hop Count | 다양한 경로 속성 |
| **최대 값** | 무제한 | 15 hop | 무제한 |
| **수렴 속도** | 빠름 (몇 초) | 느림 (분 단위) | 중간 |
| **토폴로지 정보** | 전체 맵 보유 | 인접 노드 정보만 | 경로 속성 정보 |
| **업데이트 방식** | 트리거드 업데이트 + 주기적 | 주기적 (30초) | 트리거드 업데이트 + 주기적 |
| **계층 구조** | Area (계층적) | 평면 구조 | AS (계층적) |
| **알고리즘** | 다익스트라 (SPF) | 벨만-포드 | 경로 선택 알고리즘 |
| **전송 프로토콜** | IP 프로토콜 89 | UDP 520 | TCP 179 |
| **주소** | 멀티캐스트 (224.0.0.5/6) | 브로드캐스트(v1)/멀티캐스트(v2) | 유니캐스트 |
| **VLSM 지원** | 지원 | RIPv2부터 지원 | 지원 |
| **인증** | 지원 | RIPv2부터 지원 | 지원 |
| **표준** | IETF 표준 | IETF 표준 | IETF 표준 |
| **사용 예시** | 대기업 내부 네트워크 | 소규모 네트워크 | 인터넷 서비스 제공자 간 |

## 4. 추가 개념 정리

### Path Vector 프로토콜 (BGP)
- Distance Vector의 변형
- 전체 경로 정보(AS 경로)를 포함하여 루프 방지
- 정책 기반 라우팅 결정 가능

### IGP vs EGP
- **IGP(내부 게이트웨이 프로토콜)**: 동일 AS 내부에서 사용(OSPF, RIP, IS-IS)
- **EGP(외부 게이트웨이 프로토콜)**: 서로 다른 AS 간 사용(BGP)

### 수렴(Convergence)
- 네트워크 변경 후 모든 라우터가 일관된 정보를 갖는 상태
- Link-State가 Distance Vector보다 빠른 수렴

### 라우팅 루프 방지 메커니즘
- **OSPF**: 전체 토폴로지 정보로 루프 방지
- **RIP**: Split Horizon, Poison Reverse, Hold-down 타이머
- **BGP**: AS_Path 속성으로 루프 감지 및 방지

