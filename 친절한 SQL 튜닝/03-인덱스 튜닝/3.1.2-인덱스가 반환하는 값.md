# 인덱스: ROWID와 커버링 인덱스

인덱스는 항상 컬럼 값 or rowID 둘 중 하나를 반환한다.

## 1. 인덱스 반환 정보 종류

### 1.1 ROWID 반환

* 일반적인 B-Tree 인덱스 또는 기본 인덱스 사용 시
* 인덱스 엔트리에 키 값과 ROWID만 저장
* 쿼리에서 필요한 컬럼이 인덱스에 없으면 ROWID로 테이블 블록에 접근 후 데이터를 읽음

**예시**:

```sql
SELECT ename FROM employees WHERE empno = 7369;
-- 인덱스: empno + ROWID
```

### 1.2 컬럼 값 반환 (커버링 인덱스)

* 커버링 인덱스는 쿼리에서 필요한 모든 컬럼이 인덱스 엔트리에 포함되어 있음
* 인덱스만 읽고 바로 결과 반환 가능, 테이블 접근 필요 없음

**예시**:

```sql
SELECT empno, ename FROM employees WHERE deptno = 10;
-- 인덱스: empno + ename + deptno
```

## 2. 커버링 인덱스 특징

| 항목       | 일반 인덱스            | 커버링 인덱스               |
| -------- | ----------------- | --------------------- |
| 인덱스 엔트리  | 키 값 + ROWID       | 키 값 + ROWID + 쿼리 컬럼 값 |
| 테이블 접근   | 필요                | 불필요                   |
| ROWID 사용 | 사용                | 필요 없음                 |
| 쿼리 처리    | 인덱스 → ROWID → 테이블 | 인덱스만 읽고 결과 반환         |

### 핵심 포인트

1. 커버링 인덱스는 테이블에 있는 컬럼을 인덱스 엔트리에 포함시켜 테이블 접근을 줄임
2. 테이블은 여전히 원본 데이터를 보유하지만, 인덱스만으로 결과를 반환할 수 있음
3. 인덱스는 상황에 따라 **ROWID 또는 컬럼 값**을 반환하며, 쿼리 성격에 따라 선택된다

## 3. 결론

* 일반 인덱스: ROWID를 반환하고 테이블 접근 필요
* 커버링 인덱스: 필요한 컬럼 값이 인덱스에 포함되어 있어 테이블 접근 불필요
* 인덱스는 항상 데이터를 직접 반환하지는 않고, **쿼리 필요에 따라 ROWID 또는 컬럼 값을 반환**한다.
