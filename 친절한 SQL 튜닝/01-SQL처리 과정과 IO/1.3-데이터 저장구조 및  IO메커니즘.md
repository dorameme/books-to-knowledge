# 데이터베이스 저장구조
SQL(특히 Oracle)에서 저장 구조는 아래 5단계 계층으로 이루어진다:

**블록 → 익스텐트 → 세그먼트 → 테이블스페이스 → 데이터파일**

아래에서 위로 갈수록 큰 단위이다.

---

# 1. 블록(Block)

가장 작은 저장 단위이다.

* 디스크 I/O의 최소 단위
* 일반적으로 크기: 8KB / 16KB 등
* 테이블의 데이터 한 줄(row)이 블록에 저장된다.
* 인덱스의 엔트리도 블록에 저장된다.



---

# 2. 익스텐트(Extent)

블록 여러 개를 묶어놓은 덩어리이다.

* 일반적으로 **연속된 블록들의 집합**
* 크기를 늘릴 때 보통 **익스텐트 단위로** 확장됨
* 세그먼트가 공간을 필요로 하면 새로운 익스텐트를 받는다.



예:

* 블록 64개 → 하나의 익스텐트

---

# 3. 세그먼트(Segment)

익스텐트 여러 개로 구성된 **오브젝트 단위 저장공간**이다.

세그먼트 종류:

* 테이블 세그먼트 (테이블 데이터 저장)
* 인덱스 세그먼트
* 롤백 세그먼트(Undo Segment)
* 임시 세그먼트(Temp 작업용)



예:

* 테이블 하나 = 하나의 세그먼트
* 인덱스 하나 = 하나의 세그먼트

---

# 4. 테이블스페이스(Tablespace)

세그먼트들을 담는 **논리적 저장 공간**이다.

* 여러 개의 세그먼트를 보관함
* 데이터파일을 그룹으로 묶어 관리함
* 사용자는 주로 테이블스페이스 단위로 공간 할당함


예:

* USERS 테이블스페이스
* SYSTEM 테이블스페이스
* UNDO 테이블스페이스

---

# 5. 데이터파일(Datafile)

실제 디스크에 존재하는 **물리적 파일**이다.

* 테이블스페이스는 여러 데이터파일로 구성됨
* 세그먼트의 데이터는 결국 데이터파일 내부에 저장됨
* 테이블스페이스 확장은 보통 데이터파일 추가/확장으로 이뤄짐



---

# 🔗 전체 구조 요약

아주 직관적으로 계층 구조를 그리면:

```
데이터파일 (물리 파일)
 └── 테이블스페이스 (논리 공간)
      └── 세그먼트 (테이블/인덱스 객체)
           └── 익스텐트 (블록 묶음)
                └── 블록 (최소 저장 단위)
```

---


### ■ 데이터파일 = 실제 하드디스크 파일

### ■ 테이블스페이스 = 폴더 (논리적인 저장 구역)

### ■ 세그먼트 = 개별 문서(테이블, 인덱스 같은 객체)

### ■ 익스텐트 = 문서의 챕터(큰 덩어리)

### ■ 블록 = 문서의 페이지(최소 단위)
