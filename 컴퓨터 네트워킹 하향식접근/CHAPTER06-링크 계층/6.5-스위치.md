
### 1. VLAN이 뭔데?
물리적 네트워크 인프라를 논리적으로 분할하여 여러 개의 가상 LAN을 생성하는 기술이다.     
하나의 물리적 스위치를 여러 개의 논리적 스위치처럼 동작시킨다.      

---

### 2. 왜 쓰는데? 
   브로드캐스트 격리 (제일 중요): A부서 컴퓨터에서 뿌리는 브로드캐스트 패킷이 B부서 컴퓨터에는 절대 안 간다.     네트워크 잡음이 확 줄어들고 성능이 개선됨.    
   보안: 논리적으로 떨어져 있으니까, 다른 VLAN에 있는 장비랑 통신하려면 반드시 라우터(또는 L3 스위치)를 거쳐야 해.       여기에 접근 제어 리스트(ACL) 걸어두면 보안 쎄짐.    
   관리 편함: 사람 이동시키려고 포트 뽑아다 꽂을 필요 없음.      그냥 관리 화면에서 "이 포트를 A VLAN에서 B VLAN으로 옮겨라" 한 방이면 끝.     

---

### 3. VLAN 동작의 핵심: 포트 타입 두 가지
이거 이해해야 VLAN을 아는 거다.

   액세스 포트 (Access Port):
       하나의 VLAN만 속한다. 보통 PC, 서버, 프린터 같은 최종 사용자 장비 연결한다.
       들어오는 프레임: 태그 없는 일반 이더넷 프레임 받음. 스위치는 이걸 해당 포트가 속한 기본 VLAN(PVID)에 넣어서 처리한다.
       나가는 프레임: VLAN 태그를 떼고 (untagged) 보낸다. PC는 VLAN 태그 같은 거 모르니까.

   트렁크 포트 (Trunk Port):
       여러 VLAN의 트래픽을 실어나른다. 스위치-스위치, 스위치-라우터 연결할 때 쓴다.
       들어오는 프레임: VLAN 태그가 붙어 있는 프레임을 기대한다. 태그 정보로 어느 VLAN 소속인지 판단.
       나가는 프레임: VLAN 태그를 붙여서 (tagged) 보낸다. (단, 네이티브 VLAN은 예외로 태그 안 붙이고 보낼 수 있음. 취약점 될 수 있으니 조심해야 함.)

비유: 액세스 포트는 일반 도로 (한 종류 차만 다님), 트렁크 포트는 고속도로 (여러 차종이 레인 나눠서 다님). 태그는 차에 붙은 '몇 번 레인 가는 차'라는 표시판.

---

### 4. 꼭 알아야 할 용어들

   VLAN ID (VID): VLAN의 이름표. 1부터 4094까지 쓸 수 있음.      
       VLAN 1: 기본값. 관리용. 모든 포트가 처음엔 여기 속해 있음. 보안상 문제 될 수 있어서 실무에선 쓰지 말라고 함.        
   기본 VLAN (PVID, Port VLAN ID): 액세스 포트가 기본적으로 속해 있는 VLAN 번호. 그 포트에서 태그 없는 프레임이 들어오면 이 VLAN으로 처리해라 하는 거.       
   네이티브 VLAN (Native VLAN): 트렁크 포트에서 태그 없이 보내지는 특별한 VLAN. 트렁크 포트 양쪽 스위치에서 꼭 같은 번호로 맞춰야 함. 안 맞으면 VLAN 헬(이상 동작) 난다.     
   기본값은 VLAN 1인데 보안상 바꾸는 게 좋다.        
   태그된 프레임 (Tagged Frame) / 태그 없는 프레임 (Untagged Frame): IEEE 802.1Q 헤더가 붙었냐 안 붙었냐의 차이. 액세스 장비는 태그 없는 거만 이해한다.      

---

### 5. VLAN 통신의 핵심 규칙 (이건 외워라)
같은 VLAN 안에서만 L2 통신(스위칭)이 가능하다.      다른 VLAN 간에 통신하려면 무조건 L3 장비(라우터나 L3 스위치)를 거쳐야 한다.      

   같은 VLAN, 같은 스위치: 스위치가 MAC 주소 테이블 보고 바로 포워딩 해줌.       
   같은 VLAN, 다른 스위치: 트렁크 포트로 태그 붙여서 VLAN 정보 유지하면서 보내짐. 반대편 스위치가 태그 보고 같은 VLAN으로 인식하고 포워딩.       
   다른 VLAN: PC A(VLAN10) -> (액세스 포트) -> 스위치 -> (라우터나 L3 스위치의 VLAN10 인터페이스) -> 라우팅 테이블 확인 -> (라우터나 L3 스위치의 VLAN20 인터페이스) -> (액세스 포트) -> PC B(VLAN20). 무조건 라우팅을 한 번 거친다.

---

### 6. 실무에서 쳐야 할 포인트

1.  설계 먼저 해라: 몇 번 VLAN에 뭐 넣을지, IP 대역은 뭐로 할지 미리 계획하지 않으면 나중에 뒤엉켜서 고생한다.
2.  트렁크 포트 설정은 정확하게: 허용할 VLAN 목록, 네이티브 VLAN 번호 양쪽에서 똑같이 맞춰라. 안 그러면 통신 안 되고 문제 찾느라 시간 낭비 한다.
3.  기본값(VLAN1)에서 작업하지 마라: VLAN1은 그대로 두고, 사용자 VLAN은 100번대부터 따로 만들어서 써라. 관리 트래픽도 별도 관리 VLAN으로 빼둬라.
4.  문서화 해둬라: 어느 포트가 몇 번 VLAN이고, 어디에 연결된 건지 안 적어두면 유지보수하는 놈이 (혹은 미래의 너 자신이) 개고생한다.

---

한 줄 요약: VLAN은 물리적 스위치를 논리적으로 여러 개로 쪼개서 보안과 성능을 올리는 기술이고,         
액세스 포트와 트렁크 포트의 차이, 그리고 다른 VLAN끼리 통신하려면 라우터를 꼭 거쳐야 한다는 거만 이해하면 된다.
